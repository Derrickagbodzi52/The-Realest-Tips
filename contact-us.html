<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contact Us</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header>
  <h1>THE REALEST TIPS</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="free-tips.html">Free Tips</a>
    <a href="football.html">Football</a>
    <a href="basketball.html">Basketball</a>
    <a href="results.html">Results</a>
    <a href="about-us.html">About Us</a>
    <a href="contact-us.html">Contact Us</a>
    <div id="auth-buttons" class="auth-panel">
      <a href="login.html">Login</a>
      <a href="register.html">Register</a>
    </div>
    <div id="user-menu" class="auth-panel hidden">
      <span id="user-email"></span>
      <button onclick="logout()" class="logout-btn">Sign Out</button>
    </div>
  </nav>
</header>

<main class="container">
  <div class="card">
    <h2>Contact Us</h2>
    <p>Have questions or feedback? We'd love to hear from you. Fill out the form below and we'll get back to you shortly.</p>
  </div>

  <div class="card">
    <form id="contact-form" class="contact-form">
      <div class="form-group">
        <label for="name">Full Name *</label>
        <input type="text" id="name" name="name" required placeholder="Your name">
      </div>

      <div class="form-group">
        <label for="email">Email Address *</label>
        <input type="email" id="email" name="email" required placeholder="your@email.com">
      </div>

      <div class="form-group">
        <label for="subject">Subject *</label>
        <input type="text" id="subject" name="subject" required placeholder="How can we help?">
      </div>

      <div class="form-group">
        <label for="message">Message *</label>
        <textarea id="message" name="message" rows="6" required placeholder="Your message here..."></textarea>
      </div>

      <button type="submit" class="submit-btn">Send Message</button>
    </form>
  </div>

  <div class="card">
    <h3>Other Ways to Reach Us</h3>
    <p>
      <strong>Email:</strong> support@therealestips.com<br>
      <strong>Phone:</strong> +233 531368079<br>
      <strong>Business Hours:</strong> Everyday, 24/7 Support
    </p>
  </div>
</main>

<script src="js/main.js"></script>
<script type="module" src="js/firebase.js"></script>
<script type="module" src="js/auth.js"></script>
<script type="module">
  import { auth } from './js/firebase.js';
  import { onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

  onAuthStateChanged(auth, user => {
    const authButtons = document.getElementById('auth-buttons');
    const userMenu = document.getElementById('user-menu');
    const userEmail = document.getElementById('user-email');
    if (user) {
      authButtons.classList.add('hidden');
      userMenu.classList.remove('hidden');
      userEmail.textContent = user.email;
    } else {
      authButtons.classList.remove('hidden');
      userMenu.classList.add('hidden');
      userEmail.textContent = '';
    }
  });

  // Handle contact form submission
  document.getElementById('contact-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    const submitBtn = document.querySelector('.submit-btn');
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Sending...';
    submitBtn.disabled = true;

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const subject = document.getElementById('subject').value;
    const message = document.getElementById('message').value;

    try {
      const response = await fetch('http://localhost:5000/api/contact', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ name, email, subject, message })
      });

      const data = await response.json();

      if (response.ok) {
        alert(`Thank you, ${name}! Your message has been sent. We'll get back to you soon at ${email}.`);
        document.getElementById('contact-form').reset();
      } else {
        alert(`Error: ${data.error || 'Failed to send message'}`);
      }
    } catch (error) {
      console.error('Error:', error);
      alert('Connection error. Please make sure the backend server is running on localhost:5000');
    } finally {
      submitBtn.textContent = originalText;
      submitBtn.disabled = false;
    }
  });
</script>
</body>
</html>
